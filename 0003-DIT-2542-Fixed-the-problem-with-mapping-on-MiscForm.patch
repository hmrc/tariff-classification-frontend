From 8dfd9e514e8b6efb8d443b951961f0bb1f32064c Mon Sep 17 00:00:00 2001
From: "emilia.trendafilova"
 <20456486+emilia-trendafilova@users.noreply.github.com>
Date: Mon, 21 Dec 2020 13:27:49 +0000
Subject: [PATCH 3/3] DIT-2542 : Fixed the problem with mapping on MiscForm

---
 app/models/forms/v2/MiscellaneousForm.scala | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

diff --git a/app/models/forms/v2/MiscellaneousForm.scala b/app/models/forms/v2/MiscellaneousForm.scala
index 507a630a..eac6b558 100644
--- a/app/models/forms/v2/MiscellaneousForm.scala
+++ b/app/models/forms/v2/MiscellaneousForm.scala
@@ -29,14 +29,14 @@ object MiscellaneousForm {
     "caseType" -> textTransformingTo(MiscCaseType.withName, _.toString, "error.empty.miscCaseType")
   )(identity)(Some(_))
 
-  private val form2Misc: (String, String) => MiscApplication = {
-    case (shortDescr, contactName) =>
+  private val form2Misc: (String, String, String) => MiscApplication = {
+    case (shortDescr, contactName, caseType) =>
       MiscApplication(
         contact = Contact("", contactName, None),
         offline = false,
         name = "",
         contactName = Some(contactName),
-        caseType = MiscCaseType.IB,
+        caseType = MiscCaseType.withName(caseType),
         detailedDescription = Some(shortDescr),
         sampleToBeProvided = false,
         sampleToBeReturned = false,
@@ -44,10 +44,10 @@ object MiscellaneousForm {
       )
   }
 
-    private val misc2Form: MiscApplication => Option[(String, String, MiscCaseType)] = misc =>
-      Some((misc.detailedDescription.getOrElse(""), misc.contactName.getOrElse(""), misc.caseType))
+    private val misc2Form: MiscApplication => Option[(String, String, String)] = misc =>
+      Some((misc.detailedDescription.getOrElse(""), misc.contactName.getOrElse(""), misc.caseType.toString))
 
-    val newMiscForm: Form[MiscApplication] =
+    val newMiscForm: Form[MiscApplication] = Form (
       mapping(
         "detailedDescription"       -> textNonEmpty("Please enter a short case description"),
         "contactName"      -> textNonEmpty("Please enter a case contact name"),
-- 
2.19.1

